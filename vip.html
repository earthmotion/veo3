<!DOCTYPE html>
<html lang="id" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VEO 3 UNLIMITED App</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- React, ReactDOM, Babel, Axios -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" xintegrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Custom styles for a more professional and elegant look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@700&display=swap');
        
        :root {
            --background-start: #111;
            --background-end: #000;
            --surface-color: #181818;
            --border-color: #2a2a2a;
            --primary-color: #3b82f6;
            --primary-hover: #60a5fa;
            --text-main: #f1f5f9;
            --text-secondary: #94a3b8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-end);
            background-image: radial-gradient(circle at top, var(--background-start), var(--background-end));
            color: var(--text-main);
            min-height: 100vh;
        }

        h1, h3, h5, .card-title {
            font-family: 'Playfair Display', serif;
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background-color: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .card-header {
            background-color: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--border-color);
        }

        .login-card {
             border: 1px solid transparent;
             background-image: linear-gradient(var(--surface-color), var(--surface-color)), 
                               radial-gradient(circle at top left, var(--primary-color), #8b5cf6);
             background-origin: border-box;
             background-clip: padding-box, border-box;
        }

        .form-control, .form-select {
            background-color: #1f1f1f;
            border-color: #3a3a3a;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            transition: all 0.3s ease;
        }
        .form-control:focus, .form-select:focus {
            background-color: #1f1f1f;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
            color: var(--text-main);
        }
        
        .btn {
            border-radius: 0.5rem;
            padding: 0.6rem 1.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }
        .btn-primary:hover {
            background-color: var(--primary-hover);
            border-color: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(96, 165, 250, 0.3);
        }
        .btn-outline-secondary {
            border-color: #4a4a4a;
        }
        .btn-outline-secondary:hover {
            background-color: #2a2a2a;
            border-color: #5a5a5a;
        }
        
        .nav-pills .nav-link {
            color: var(--text-secondary);
            border-radius: 0.5rem;
        }
        .nav-pills .nav-link.active {
            background-color: var(--primary-color);
            color: #fff;
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.2);
        }
    </style>
</head>

<body>
    <!-- The root element where the React app will be mounted -->
    <div id="root"></div>

    <!-- CORS Anywhere script to handle API requests -->
    <script>
        (function() {
            var cors_api_host = 'cors-anywhere.herokuapp.com';
            var cors_api_url = 'https://' + cors_api_host + '/';
            var slice = [].slice;
            var origin = window.location.protocol + '//' + window.location.host;
            var open = XMLHttpRequest.prototype.open;
            XMLHttpRequest.prototype.open = function() {
                var args = slice.call(arguments);
                var targetOrigin = /^https?:\/\/([^\/]+)/i.exec(args[1]);
                if (targetOrigin && targetOrigin[0].toLowerCase() !== origin &&
                    targetOrigin[1] !== cors_api_host) {
                    args[1] = cors_api_url + args[1];
                }
                return open.apply(this, args);
            };
        })();
    </script>

    <!-- The React application code, transpiled by Babel -->
    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // Main API client class
        class LunaAI {
          constructor(debug = false) {
            this.debug = debug;
            const p = ["aHR0cHM6Ly9m", "Z3NpLmtveWVi", "LmFwcC9hcGkv", "dG9vbHMvYnlw", "YXNzY2YvdjU="];
            const p_ = ["aHR0cHM6Ly9h", "aWFydGljbGUu", "ZXJ3ZWltYS5h", "aS9hcGkvdjEv", "c2Vjb25kYXJ5", "LXBhZ2UvYXBp", "L2NyZWF0ZQ=="];
            const p__ = ["aHR0cHM6Ly9h", "aWFydGljbGUu", "ZXJ3ZWltYS5h", "aS9hcGkvdjEv", "c2Vjb25kYXJ5", "LXBhZ2UvYXBp", "Lw=="];
            const p___ = ["MHg0QUFBQUFB", "QWRKWm1OeFc1", "NG8tR3Zk"];
            this.bypassUrl = atob(p.join(''));
            this.createUrl = atob(p_.join(''));
            this.statusUrl = atob(p__.join(''));
            this.sitekey = atob(p___.join(''));
            this._interval = null;
          }

          cancel() {
            if (this._interval) {
              clearInterval(this._interval);
              this._interval = null;
            }
          }

          async bypassCF(url, apikey) {
            const res = await axios.get(this.bypassUrl, { params: { apikey, url, sitekey: this.sitekey, mode: "turnstile-min" }, headers: { 'x-requested-with': 'XMLHttpRequest' } });
            return res?.data?.data?.token;
          }

          async createVideo(token, payload) {
            const headers = { 'Content-Type': 'application/json', 'verify': token, 'uniqueid': window.btoa(String(Date.now())) || "", 'x-requested-with': 'XMLHttpRequest' };
            const res = await axios.post(this.createUrl, payload, { headers });
            const recordId = res?.data?.data?.recordId;
            if (recordId) return recordId;
            throw new Error(`API returned an error: ${res?.data?.msg || res?.data?.message || JSON.stringify(res.data)}`);
          }

          async checkStatus(recordId) {
            const res = await axios.get(`${this.statusUrl}${recordId}`, { headers: { 'x-requested-with': 'XMLHttpRequest' } });
            return res?.data?.data;
          }

          run({ apikey, prompt, imgUrls = [], quality = "720p", duration = 8, aspectRatio = "16:9", secondaryPageId = 1946, channel = "VEO3", source = "lunaai.video", type = "features", watermarkFlag = false, privateFlag = false, isTemp = true, vipFlag = false, model = "veo-3-fast", onPoll }) {
            return new Promise(async (resolve, reject) => {
              try {
                if (!apikey) return reject(new Error("API Key is missing."));
                const token = await this.bypassCF("https://lunaai.video/features/v3-fast", apikey);
                if (!token) return reject(new Error("Bypass token failed. Please ensure the CORS proxy is active."));
                this.debug && console.log("[üõ°Ô∏è Bypass Success] Token:", token);
                const payload = { prompt, imgUrls, quality, duration, autoSoundFlag: false, soundPrompt: "", autoSpeechFlag: false, speechPrompt: "", speakerId: "Auto", aspectRatio, secondaryPageId, channel, source, type, watermarkFlag, privateFlag, isTemp, vipFlag, model };
                const recordId = await this.createVideo(token, payload);
                this.debug && console.log("[üé¨ Video Requested] Record ID:", recordId);
                this._interval = setInterval(async () => {
                  try {
                    const data = await this.checkStatus(recordId);
                    onPoll?.(data);
                    if (data?.state === "success" && data?.completeData) {
                      clearInterval(this._interval); this._interval = null; resolve(JSON.parse(data.completeData));
                    } else if (data?.failCode || data?.failMsg) {
                      clearInterval(this._interval); this._interval = null; reject(new Error(`[‚ùå Failed] ${data.failCode || ""} ${data.failMsg || ""}`));
                    }
                  } catch (err) { clearInterval(this._interval); this._interval = null; reject(err); }
                }, 5000);
              } catch (err) { reject(err); }
            });
          }
        }

        function guessVideoUrl(obj) {
          if (!obj) return undefined;
          let finalUrl = undefined;
          const candidates = [obj.video_url, obj.videoUrl, obj.image_url, obj.imageUrl, obj.url, obj.downloadUrl, obj?.video?.url, obj?.data?.videoUrl, obj?.data?.url];
          for (const c of candidates) { if (typeof c === "string" && c.startsWith("http")) { finalUrl = c; break; } }
          if (!finalUrl) { try { const queue = [obj]; while (queue.length > 0 && !finalUrl) { const cur = queue.shift(); if (typeof cur === 'string' && cur.startsWith('http') && (cur.includes('.mp4') || cur.includes('.jpg') || cur.includes('.png'))) { finalUrl = cur; break; } if (cur && typeof cur === 'object') { for (const v of Object.values(cur)) { queue.push(v); } } } } catch (e) { console.error("Deep URL search failed:", e); } }
          if (finalUrl) { let modifiedUrl = finalUrl.replace(/_watermarked/g, ''); modifiedUrl = modifiedUrl.replace(/\.(jpg|jpeg|png|webp)(\?.*)?$/i, ".mp4"); return modifiedUrl; }
          return undefined;
        }

        function StatusDisplay({ logs, busy, error, videoUrls }) {
            const latestLog = logs.length > 0 ? logs[logs.length - 1] : "";
            const statusText = latestLog.split('‚Äî')[1]?.trim() || "Menunggu untuk memulai...";
            const progressMatch = latestLog.match(/\((\d+)%\)/);
            const progress = progressMatch ? parseInt(progressMatch[1], 10) : 0;

            let icon, colorClass, displayStatusText, progressClass;
            if (error) {
                icon = <i className="fa-solid fa-circle-xmark fa-3x text-danger"></i>;
                progressClass = "bg-danger"; displayStatusText = "Terjadi Kesalahan";
            } else if (videoUrls.length === 2) {
                icon = <i className="fa-solid fa-circle-check fa-3x text-success"></i>;
                progressClass = "bg-success"; displayStatusText = "Video Berhasil Dibuat!";
            } else if (busy) {
                icon = <div className="spinner-border text-primary" role="status" style={{width: '3rem', height: '3rem'}}><span className="visually-hidden">Loading...</span></div>;
                progressClass = "bg-primary progress-bar-striped progress-bar-animated"; displayStatusText = statusText;
            } else {
                icon = <i className="fa-solid fa-circle-info fa-3x text-secondary"></i>;
                progressClass = "bg-secondary"; displayStatusText = logs.length > 0 ? "Dibatalkan" : "Siap untuk memulai";
            }
            
            const totalProgress = videoUrls.length * 50 + progress / 2;

            return (
                <div className="card h-100">
                    <div className="card-header">
                        <h5 className="card-title mb-0">Status Proses</h5>
                        <p className="card-text text-body-secondary small">Perkembangan pembuatan video secara real-time</p>
                    </div>
                    <div className="card-body d-flex flex-column justify-content-center text-center">
                        <div className="fade-in mb-3">{icon}</div>
                        <p className="fw-medium mb-3" style={{height: '2rem'}}>{displayStatusText}</p>
                        <div className="progress mb-3" role="progressbar" aria-valuenow={totalProgress} aria-valuemin="0" aria-valuemax="100" style={{height: '0.75rem'}}>
                            <div className={`progress-bar ${progressClass} transition-all duration-500 ease-in-out`} style={{ width: `${videoUrls.length === 2 ? 100 : totalProgress}%` }} />
                        </div>
                        <div className="text-start small font-monospace bg-dark-subtle p-3 rounded h-100" style={{minHeight: '120px', overflowY: 'auto'}}>
                            {logs.length > 0 ? logs.slice(-5).map((l, i) => <div key={i} className="text-break">{l}</div>) : <div className="text-body-secondary">Log akan tampil di sini‚Ä¶</div>}
                        </div>
                    </div>
                </div>
            );
        }

        function App() {
          const [isAuthenticated, setIsAuthenticated] = useState(false);
          const [passwordInput, setPasswordInput] = useState("");
          const [passwordError, setPasswordError] = useState("");
          const [remotePassword, setRemotePassword] = useState(null);
          const [isRemotePasswordLoading, setIsRemotePasswordLoading] = useState(true);
          
          const samplePrompts = [
              "A futuristic city skyline at night, with flying cars and neon lights.",
              "A serene Japanese garden with a koi pond and cherry blossoms in full bloom.",
              "An astronaut floating in space, looking at Earth from the window of a spaceship.",
              "A detailed close-up of a honeybee collecting nectar from a vibrant flower.",
              "A fantasy landscape with floating islands and waterfalls cascading into the clouds.",
              "A cozy library with floor-to-ceiling bookshelves and a crackling fireplace.",
              "A majestic eagle soaring over a snow-capped mountain range.",
              "A bustling medieval marketplace with merchants and townspeople."
          ];

          const [tab, setTab] = useState("text");
          const [prompt, setPrompt] = useState(samplePrompts[Math.floor(Math.random() * samplePrompts.length)]);
          const [imgUrlsRaw, setImgUrlsRaw] = useState("");
          const [quality, setQuality] = useState("720p");
          const [model, setModel] = useState("veo-3-fast");
          const [busy, setBusy] = useState(false);
          const [logs, setLogs] = useState([]);
          const [videoUrls, setVideoUrls] = useState([]);
          const [error, setError] = useState("");
          const [downloading, setDownloading] = useState(-1);
          const [apiKey, setApiKey] = useState("");
          const [isApiLoading, setIsApiLoading] = useState(true);
          const clientRef = useRef(null);
          
          function pushLog(line) { setLogs((prev) => [...prev, `${new Date().toLocaleTimeString()} ‚Äî ${line}`].slice(-200)); }

          useEffect(() => {
            async function fetchApiKey() {
                const shuffledParts = ["dHYyLmd", "ova2xka3", "aHR0cHM6", "pby96en", "cHJvamVj", "dkd2oudHh0", "pdGh1Yi5", "Ly9yYWZh"];
                const order = [2, 7, 4, 0, 6, 3, 1, 5];
                const b64 = order.map(i => shuffledParts[i]).join('');
                const apiUrl = atob(b64);
                pushLog('Fetching API key...');
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) throw new Error(`Network response was not ok, status: ${response.status}`);
                    const scriptContent = await response.text();
                    const match = scriptContent.match(/(fgsiapi-[a-f0-9-]+)/);
                    if (match && match[1]) { setApiKey(match[1]); pushLog("‚úÖ API Key loaded successfully."); } 
                    else { throw new Error("Could not find a valid API key in the fetched script."); }
                } catch (error) {
                    console.error("Failed to fetch API key:", error);
                    const errorMessage = `Failed to load API key. Please check your internet connection and refresh the page. Details: ${error.message}`;
                    setError(errorMessage); pushLog(`‚ùå Error: ${errorMessage}`);
                } finally { setIsApiLoading(false); }
            }
            if (isAuthenticated) {
                fetchApiKey();
            }
          }, [isAuthenticated]);
          
          useEffect(() => {
            async function fetchRemotePassword() {
                setIsRemotePasswordLoading(true);
                try {
                    const url = "https://rafaprojectv2.github.io/zzz/ssdwd2qsds232er.js";
                    const response = await fetch(url);
                    if (!response.ok) throw new Error(`Network response was not ok: ${response.status}`);
                    const scriptContent = await response.text();
                    const password = scriptContent.trim();
                    if (password) {
                        setRemotePassword(password);
                    } else {
                        console.error("Remote password file is empty.");
                    }
                } catch (error) {
                    console.error("Failed to fetch remote password:", error);
                    setPasswordError("Gagal memuat verifikasi. Coba lagi nanti.");
                } finally {
                    setIsRemotePasswordLoading(false);
                }
            }
            fetchRemotePassword();
          }, []);

          useEffect(() => () => clientRef.current?.cancel(), []);

          const imgUrls = useMemo(() => imgUrlsRaw.split(/\n|,/).map((s) => s.trim()).filter(Boolean), [imgUrlsRaw]);
          
          const handlePasswordSubmit = (e) => {
              e.preventDefault();
              const p1 = "MjM";
              const p2 = "xNQ==";
              const localPassword = atob(p1 + p2); 

              if (passwordInput === localPassword || (remotePassword && passwordInput === remotePassword)) {
                  setIsAuthenticated(true);
                  setPasswordError("");
              } else {
                  setPasswordError("Password salah. Silakan coba lagi.");
              }
          };

          async function handleRun() {
            if (!apiKey) { setError("API Key is not loaded. Cannot start generation."); return; }
            setBusy(true); setError(""); setVideoUrls([]); setLogs([]);
            const app = new LunaAI(true);
            clientRef.current = app;
            try {
              for (let i = 0; i < 2; i++) {
                pushLog(`Generating video ${i + 1} of 2...`);
                const res = await app.run({ apikey: apiKey, prompt, imgUrls: tab === "image" ? imgUrls : [], quality, model, vipFlag: true, onPoll: (data) => { if (!data) return; const pct = data?.percent || data?.progress; const st = data?.state || data?.status; pushLog(`Status (Video ${i + 1}): ${st ?? "‚Ä¶"}${pct ? ` (${pct}%)` : ""}`); } });
                const url = guessVideoUrl(res);
                if (url) { setVideoUrls(prev => [...prev, url]); pushLog(`‚úÖ Success ‚Äî video ${i + 1} generated.`); } 
                else { pushLog(`‚ö†Ô∏è Failed to get URL for video ${i + 1}.`); }
              }
            } catch (e) {
              console.error(e);
              let errorMessage = e?.message || String(e);
              if (e.isAxiosError) { errorMessage = `Network request failed: ${e.message}.`; if (e.response) { errorMessage += ` (Status: ${e.response.status} ${e.response.statusText})`; } }
              const fullError = `${errorMessage} This can be caused by two main issues: 1) The CORS proxy needs activation. Please visit cors-anywhere.herokuapp.com, request access, and try again. 2) Your API Key may be invalid or expired.`;
              setError(fullError); pushLog(`‚ùå Error: ${errorMessage}`);
            } finally { setBusy(false); }
          }

          function handleCancel() { clientRef.current?.cancel(); setBusy(false); pushLog("‚èπÔ∏è Cancelled by user."); }

          async function handleDownload(url, index) {
              setDownloading(index); setError('');
              try {
                  const response = await fetch(`https://cors-anywhere.herokuapp.com/${url}`);
                  if (!response.ok) throw new Error(`Network response was not ok: ${response.statusText}`);
                  const blob = await response.blob();
                  const objectUrl = window.URL.createObjectURL(blob);
                  const link = document.createElement('a');
                  link.href = objectUrl; link.download = `veo3-unlimited-video-${index + 1}.mp4`;
                  document.body.appendChild(link); link.click(); document.body.removeChild(link);
                  window.URL.revokeObjectURL(objectUrl);
              } catch (err) { console.error('Download failed:', err); setError("Download failed. Please try right-clicking the video and selecting 'Save video as...'. This may be due to a network or proxy issue.");
              } finally { setDownloading(-1); }
          }
          
          if (!isAuthenticated) {
              return (
                  <div className="container vh-100 d-flex align-items-center justify-content-center">
                      <div className="card login-card shadow-lg fade-in" style={{width: '25rem'}}>
                          <div className="card-body p-4 p-md-5">
                              <h3 className="card-title text-center mb-2">VEO 3 UNLIMITED</h3>
                              <p className="card-subtitle mb-4 text-center text-body-secondary">Silakan masuk untuk melanjutkan</p>
                              <form onSubmit={handlePasswordSubmit}>
                                  <div className="mb-3">
                                      <label htmlFor="password-input" className="form-label">Password</label>
                                      <input
                                          type="password"
                                          className="form-control"
                                          id="password-input"
                                          value={passwordInput}
                                          onChange={(e) => setPasswordInput(e.target.value)}
                                          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                          autoFocus
                                      />
                                  </div>
                                  {passwordError && <div className="alert alert-danger py-2 small">{passwordError}</div>}
                                  <div className="d-grid gap-2 mt-4">
                                      <button type="submit" className="btn btn-primary" disabled={isRemotePasswordLoading}>
                                          {isRemotePasswordLoading ? <span className="spinner-border spinner-border-sm" aria-hidden="true"></span> : 'Masuk'}
                                      </button>
                                       <a href="https://wa.me/message/E4KYUUBRW37VO1" target="_blank" rel="noopener noreferrer" className="btn btn-outline-secondary">
                                          Daftar
                                      </a>
                                  </div>
                              </form>
                          </div>
                      </div>
                  </div>
              );
          }

          return (
            <div className="container-fluid p-3 p-md-4">
                <header className="fade-in mb-4 pb-3 border-bottom border-secondary-subtle">
                  <div>
                    <h1 className="fw-bold fs-2">VEO 3 UNLIMITED</h1>
                    <p className="text-body-secondary">Karya anda tercipta melalui sentuhan kreativitas dan teknologi AI</p>
                  </div>
                </header>

                <div className="card mb-4">
                    <div className="card-header">
                        <h5 className="card-title mb-0">Konfigurasi</h5>
                        <p className="card-text text-body-secondary small">Masukkan parameter video Anda</p>
                    </div>
                    <div className="card-body p-4">
                        <div className="row g-4">
                            <div className="col-md-6">
                                <ul className="nav nav-pills nav-fill bg-dark-subtle p-1 rounded mb-4">
                                    <li className="nav-item">
                                        <a href="#" onClick={(e) => {e.preventDefault(); setTab('text');}} className={`nav-link ${tab === 'text' ? 'active' : ''}`}><i className="fa-solid fa-file-lines me-2"></i>Teks ke Video</a>
                                    </li>
                                    <li className="nav-item">
                                        <a href="#" onClick={(e) => {e.preventDefault(); setTab('image');}} className={`nav-link ${tab === 'image' ? 'active' : ''}`}><i className="fa-solid fa-image me-2"></i>Gambar ke Video</a>
                                    </li>
                                </ul>
                                {tab === 'text' && <div className="mb-3"><label htmlFor="prompt-text" className="form-label">Prompt</label><textarea id="prompt-text" value={prompt} onChange={(e) => setPrompt(e.target.value)} rows="8" className="form-control" placeholder="Kota cyberpunk di malam hari dengan hujan neon‚Ä¶"></textarea><div className="form-text">Jelaskan adegan untuk video tersebut.</div></div>}
                                {tab === 'image' && <div className="space-y-4">
                                    <div className="mb-3"><label htmlFor="prompt-img" className="form-label">Prompt (opsional)</label><textarea id="prompt-img" value={prompt} onChange={(e) => setPrompt(e.target.value)} rows="3" className="form-control" placeholder="Geser dari kiri ke kanan melintasi cakrawala‚Ä¶"></textarea><div className="form-text">Panduan tambahan untuk adegan tersebut.</div></div>
                                    <div className="mb-3"><label htmlFor="img-urls" className="form-label">URL Gambar</label><textarea id="img-urls" value={imgUrlsRaw} onChange={(e) => setImgUrlsRaw(e.target.value)} rows="4" className="form-control" placeholder={`https://placehold.co/600x400/000/FFF?text=Image+1\nhttps://placehold.co/600x400/FFF/000?text=Image+2`}></textarea><div className="form-text">Satu URL per baris. Urutan berpengaruh.</div></div>
                                    {!!imgUrls.length && <div className="row row-cols-2 row-cols-sm-3 g-2">{imgUrls.map((u, i) => (<div key={i} className="col"><img src={u} alt={`img-${i}`} className="img-fluid rounded border" onError={(e) => { e.target.onerror = null; e.target.src='https://placehold.co/150/333/EEE?text=Invalid'; }} /></div>))}</div>}
                                </div>}
                            </div>
                            <div className="col-md-6">
                                <div className="row g-3 mb-4">
                                    <div className="col"><label htmlFor="quality" className="form-label">Kualitas</label><select id="quality" value={quality} onChange={e => setQuality(e.target.value)} className="form-select"><option value="480p">480p</option><option value="720p">720p</option><option value="1080p">1080p</option></select></div>
                                    <div className="col"><label htmlFor="model" className="form-label">Model</label><select id="model" value={model} onChange={e => setModel(e.target.value)} className="form-select"><option value="veo-3-fast">Veo 3 Fast</option><option value="veo-3">Veo 3</option></select></div>
                                </div>
                                <div className="d-flex gap-2 mb-4">
                                    <button onClick={handleRun} disabled={busy || isApiLoading || !apiKey} className="btn btn-primary"><i className={`fa-solid ${busy || isApiLoading ? 'fa-spinner fa-spin' : 'fa-play'} me-2`}></i>{isApiLoading ? 'Memuat API...' : (busy ? 'Membuat...' : 'Buat Video')}</button>
                                    <button onClick={handleCancel} disabled={!busy} className="btn btn-secondary"><i className="fa-solid fa-stop me-2"></i>Batal</button>
                                </div>
                                <div className="alert alert-warning small"><p className="fw-bold mb-1">Diperlukan Tindakan: Proxy Jaringan</p><p className="mb-0">Aplikasi ini menggunakan proxy publik. Jika Anda melihat kesalahan jaringan, silakan <a href="https://cors-anywhere.herokuapp.com/" target="_blank" rel="noopener noreferrer" className="alert-link">kunjungi halaman aktivasi proxy</a>, klik tombol untuk meminta akses, lalu coba lagi.</p></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div className="row g-4">
                    <div className="col-lg-8">
                        <div className="card h-100">
                            <div className="card-header"><h5 className="card-title mb-0">Pratinau Video</h5><p className="card-text text-body-secondary small">Menampilkan cuplikan hasil video yang Anda buat.</p></div>
                            <div className="card-body">
                                {videoUrls.length > 0 ? (
                                    <div className="row row-cols-1 row-cols-sm-2 g-3">
                                        {videoUrls.map((url, index) => (
                                            <div key={index} className="col">
                                                <video src={url} controls className="w-100 rounded-3 shadow-sm bg-black" />
                                                <div className="d-grid mt-2"><button onClick={() => handleDownload(url, index)} disabled={downloading === index} className="btn btn-sm btn-outline-secondary"><i className={`fa-solid ${downloading === index ? 'fa-spinner fa-spin' : 'fa-download'} me-2`}></i>Unduh Video {index + 1}</button></div>
                                            </div>
                                        ))}
                                    </div>
                                ) : (
                                    <div className="d-flex align-items-center justify-content-center bg-dark-subtle rounded-4" style={{minHeight: '250px'}}>
                                        <p className="text-body-secondary">{busy ? 'Sedang membuat video...' : 'Video Anda akan muncul di sini.'}</p>
                                    </div>
                                )}
                                {error && <div className="alert alert-danger mt-3 small">{error}</div>}
                            </div>
                        </div>
                    </div>
                    <div className="col-lg-4">
                        <StatusDisplay logs={logs} busy={busy} error={error} videoUrls={videoUrls} />
                    </div>
                </div>

                <footer className="text-center text-body-secondary small py-4 mt-4">
                  ¬© {new Date().getFullYear()} ‚Äî VEO 3 Studio ‚Ä¢ Ditenagai oleh Arif Kurniawan.
                </footer>
            </div>
          );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
